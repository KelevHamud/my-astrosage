<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VedicTime Clone</title>
    <style>
        /* 1. –ì–õ–ê–í–ù–´–ô –°–¢–ò–õ–¨ VEDICTIME (–¢–ï–ú–ù–ê–Ø –¢–ï–ú–ê) */
        :root {
            --bg-color: #121212;
            --card-bg: #1e1e1e;
            --gold: #d4af37;
            --text-main: #e0e0e0;
            --border: #333;
        }
        body { font-family: 'Segoe UI', sans-serif; background: var(--bg-color); color: var(--text-main); margin: 0; padding: 10px; }
        
        /* –ö–û–ù–¢–ï–ô–ù–ï–† */
        .app-container { max-width: 800px; margin: 0 auto; background: var(--card-bg); border-radius: 8px; box-shadow: 0 0 20px rgba(0,0,0,0.5); overflow: hidden; }

        /* –®–ê–ü–ö–ê */
        header { background: #000; padding: 20px; text-align: center; border-bottom: 2px solid var(--gold); }
        h1 { margin: 0; color: var(--gold); font-weight: 300; letter-spacing: 2px; text-transform: uppercase; }

        /* –í–í–û–î –î–ê–ù–ù–´–• */
        .controls { padding: 20px; display: flex; gap: 10px; flex-wrap: wrap; background: #252525; }
        input { flex: 1; padding: 10px; background: #333; border: 1px solid var(--border); color: white; border-radius: 4px; }
        button { padding: 10px 20px; background: var(--gold); color: black; border: none; font-weight: bold; cursor: pointer; border-radius: 4px; }
        button:hover { background: #b59020; }

        /* –í–ö–õ–ê–î–ö–ò (TABS) */
        .tabs { display: flex; border-bottom: 1px solid var(--border); }
        .tab { flex: 1; padding: 15px; text-align: center; cursor: pointer; background: #1a1a1a; color: #888; transition: 0.3s; }
        .tab.active { color: var(--gold); border-bottom: 3px solid var(--gold); background: #222; }

        /* –ö–û–ù–¢–ï–ù–¢ */
        .content-area { padding: 20px; min-height: 300px; }
        .hidden { display: none; }

        /* –¢–ê–ë–õ–ò–¶–ê */
        table { width: 100%; border-collapse: collapse; }
        th { text-align: left; color: var(--gold); border-bottom: 1px solid var(--border); padding: 10px; }
        td { padding: 10px; border-bottom: 1px solid #333; }

        /* –ì–†–ê–§–ò–ö–ê: –ö–ê–†–¢–ê (–°–ï–í–ï–†–ù–´–ô –°–¢–ò–õ–¨ - CSS HACK) */
        .kundli-box {
            position: relative;
            width: 300px; height: 300px;
            margin: 20px auto;
            border: 2px solid var(--gold);
            background: url('https://upload.wikimedia.org/wikipedia/commons/thumb/6/69/North_Indian_Chart_Blank.svg/1024px-North_Indian_Chart_Blank.svg.png');
            background-size: cover;
        }
        /* –ü–æ–∑–∏—Ü–∏–∏ –¥–æ–º–æ–≤ (—É–ø—Ä–æ—â–µ–Ω–Ω–æ –¥–ª—è –ø—Ä–∏–º–µ—Ä–∞) */
        .house { position: absolute; font-size: 10px; color: #777; }
        .planet-pos { position: absolute; font-size: 12px; font-weight: bold; color: var(--gold); text-shadow: 1px 1px 2px black; }
        
        /* –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –¥–ª—è –ø–ª–∞–Ω–µ—Ç –≤ –∫–∞—Ä—Ç–µ (–ü—Ä–∏–º–µ—Ä–Ω–∞—è —Å–µ—Ç–∫–∞ –¥–ª—è –õ–∞–≥–Ω—ã –≤–≤–µ—Ä—Ö—É) */
        .h1 { top: 15%; left: 45%; } /* –õ–∞–≥–Ω–∞ */
        .h2 { top: 5%; left: 20%; }
        .h3 { top: 15%; left: 5%; }
        .h4 { top: 45%; left: 15%; }
        .h5 { top: 75%; left: 5%; }
        .h6 { top: 85%; left: 20%; }
        .h7 { top: 75%; left: 45%; }
        .h10 { top: 45%; left: 80%; }
        /* –ò —Ç–∞–∫ –¥–∞–ª–µ–µ... */

    </style>
</head>
<body>

<div class="app-container">
    <header>
        <h1>üïâÔ∏è VedicTime Lite</h1>
    </header>

    <div class="controls">
        <input type="text" id="name" placeholder="–ò–º—è" value="–ü–∞–≤–µ–ª">
        <input type="date" id="date">
        <button onclick="loadData()">–†–ê–°–°–ß–ò–¢–ê–¢–¨</button>
    </div>

    <div class="tabs">
        <div class="tab active" onclick="switchTab('chart')">–ö–∞—Ä—Ç–∞ (D1)</div>
        <div class="tab" onclick="switchTab('table')">–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã</div>
        <div class="tab" onclick="switchTab('info')">–¢—Ä–∞–∫—Ç–æ–≤–∫–∞</div>
    </div>

    <div id="chart" class="content-area">
        <div style="text-align: center; color: #888;">–í–∞—à–∞ –∫–∞—Ä—Ç–∞ –†–∞—à–∏</div>
        <div class="kundli-box" id="kundliViz">
            </div>
    </div>

    <div id="table" class="content-area hidden">
        <table id="dataTable">
            <thead><tr><th>–ü–ª–∞–Ω–µ—Ç–∞</th><th>–ó–Ω–∞–∫</th><th>–ì—Ä–∞–¥—É—Å</th><th>–î–æ–º</th></tr></thead>
            <tbody></tbody>
        </table>
    </div>

    <div id="info" class="content-area hidden">
        <div id="predictions">–ù–∞–∂–º–∏—Ç–µ "–†–∞—Å—Å—á–∏—Ç–∞—Ç—å", —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å —Ç—Ä–∞–∫—Ç–æ–≤–∫—É.</div>
    </div>
</div>

<script>
    // –í–°–¢–ê–í–¨ –°–Æ–î–ê –°–í–û–Æ –°–°–´–õ–ö–£ –ò–ó GOOGLE (–¢—É —Å–∞–º—É—é, —Ä–∞–±–æ—á—É—é)
    const API_URL = 'https://script.google.com/macros/s/AKfycby9dkqqspkobVumtKqwKDB5NOL8co7OlWhgIF2Wcq7WXsk3b2pn5A9Sn66yM1TDM8UR/exec'; 

    async function loadData() {
        const name = document.getElementById('name').value;
        const date = document.getElementById('date').value;
        const btn = document.querySelector('button');

        if(!API_URL.includes('http')) { alert("–í—ã –∑–∞–±—ã–ª–∏ –≤—Å—Ç–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É –≤ –∫–æ–¥!"); return; }

        btn.innerText = "–ó–∞–≥—Ä—É–∑–∫–∞...";
        
        try {
            const res = await fetch(`${API_URL}?name=${name}&date=${date}`);
            const data = await res.json();
            
            renderTable(data.planets);
            renderChart(data.planets);
            renderInfo(data.predictions);

        } catch (e) {
            console.error(e);
            alert("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å.");
        }
        btn.innerText = "–†–ê–°–°–ß–ò–¢–ê–¢–¨";
    }

    function renderTable(planets) {
        const tbody = document.querySelector('#dataTable tbody');
        tbody.innerHTML = '';
        planets.forEach(p => {
            tbody.innerHTML += `<tr><td>${p.name}</td><td>${p.sign}</td><td>${p.degree}</td><td>${p.house}</td></tr>`;
        });
    }

    function renderInfo(preds) {
        document.getElementById('predictions').innerHTML = preds.map(t => `<p>‚ú® ${t}</p>`).join('');
    }

    function renderChart(planets) {
        // –û—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –ø–ª–∞–Ω–µ—Ç
        const box = document.getElementById('kundliViz');
        box.innerHTML = ''; 

        // –ü—Ä–æ—Å—Ç–∞—è –ª–æ–≥–∏–∫–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è (–¥–ª—è –ø—Ä–∏–º–µ—Ä–∞ —Å—Ç–∞–≤–∏–º –õ–∞–≥–Ω—É –∏ –°–æ–ª–Ω—Ü–µ)
        // –ß—Ç–æ–±—ã —Å–¥–µ–ª–∞—Ç—å –∏–¥–µ–∞–ª—å–Ω–æ, –Ω—É–∂–Ω–æ –ø—Ä–æ–ø–∏—Å–∞—Ç—å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –≤—Å–µ—Ö 12 –¥–æ–º–æ–≤ CSS
        planets.forEach(p => {
            let cssClass = 'h' + p.house; // –ù–∞–ø—Ä–∏–º–µ—Ä, h1, h10
            // –ï—Å–ª–∏ –∫–ª–∞—Å—Å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω –≤ CSS, –¥–æ–±–∞–≤–ª—è–µ–º –ø–ª–∞–Ω–µ—Ç—É
            // (–í —ç—Ç–æ–º –ø—Ä–∏–º–µ—Ä–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã —Ç–æ–ª—å–∫–æ –æ—Å–Ω–æ–≤–Ω—ã–µ —É–≥–ª–æ–≤—ã–µ –¥–æ–º–∞ –¥–ª—è —Ç–µ—Å—Ç–∞)
            let el = document.createElement('div');
            el.className = `planet-pos ${cssClass}`;
            // –ï—Å–ª–∏ CSS –¥–ª—è –¥–æ–º–∞ –Ω–µ—Ç, –∫–∏–¥–∞–µ–º –≤ —Ü–µ–Ω—Ç—Ä (–¥–ª—è –æ—Ç–ª–∞–¥–∫–∏)
            if (!document.querySelector(`.${cssClass}`)) el.style = "top: 45%; left: 45%; color: white;"; 
            
            // –°–æ–∫—Ä–∞—â–∞–µ–º –∏–º—è (Sun -> Su)
            let shortName = p.name.substring(0, 2);
            el.innerText = shortName;
            
            box.appendChild(el);
        });
    }

    function switchTab(tabId) {
        document.querySelectorAll('.content-area').forEach(el => el.classList.add('hidden'));
        document.getElementById(tabId).classList.remove('hidden');
        
        document.querySelectorAll('.tab').forEach(el => el.classList.remove('active'));
        event.target.classList.add('active');
    }
</script>

</body>
</html>
