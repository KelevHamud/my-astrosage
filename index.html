<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–í–µ–¥–∏—á–µ—Å–∫–∏–π –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä: –ß–∏–Ω—Ç–∞ –ú–∞–Ω–∏ Pro</title>
    <style>
        :root {
            --gold: #d4af37;
            --dark-bg: #0f0f0f;
            --card-bg: #1a1a1a;
            --text: #e0e0e0;
            --accent: #ffcc00;
        }

        body {
            font-family: 'Segoe UI', Arial, sans-serif;
            background-color: var(--dark-bg);
            color: var(--text);
            margin: 0;
            padding: 20px;
            line-height: 1.5;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
        }

        .input-section {
            background: var(--card-bg);
            padding: 20px;
            border-radius: 15px;
            border: 1px solid var(--gold);
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 15px;
            margin-bottom: 25px;
        }

        .input-group { display: flex; flex-direction: column; }
        label { font-size: 0.8rem; color: var(--gold); margin-bottom: 5px; }
        input { padding: 10px; border-radius: 5px; border: 1px solid #333; background: #222; color: white; }

        button {
            grid-column: 1 / -1;
            padding: 15px;
            background: var(--gold);
            border: none;
            border-radius: 5px;
            font-weight: bold;
            cursor: pointer;
            transition: 0.3s;
        }

        button:hover { background: var(--accent); }

        .results { display: none; }

        .card {
            background: var(--card-bg);
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 20px;
            border-left: 4px solid var(--gold);
        }

        /* –ú–∞—Ç—Ä–∏—Ü–∞ */
        .loshu-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            max-width: 300px;
            margin: 20px auto;
        }

        .loshu-cell {
            aspect-ratio: 1;
            background: #222;
            border: 1px solid #444;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--accent);
            position: relative;
        }

        .loshu-cell small {
            position: absolute;
            top: 2px;
            right: 5px;
            font-size: 0.6rem;
            color: #555;
        }

        .yoga-tag {
            display: inline-block;
            background: #332b00;
            color: #ffcc00;
            padding: 4px 10px;
            border-radius: 4px;
            font-size: 0.8rem;
            margin: 3px;
        }

        .highlight { color: var(--gold); font-weight: bold; }
        .forecast-box { background: rgba(255, 255, 255, 0.05); padding: 15px; border-radius: 8px; margin-top: 10px; }
        .grid-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
    </style>
</head>
<body>

<div class="container">
    <h1 style="text-align:center; color:var(--gold)">üïâÔ∏è –ß–ò–ù–¢–ê –ú–ê–ù–ò PRO</h1>

    <div class="input-section">
        <div class="input-group"><label>–ò–º—è</label><input type="text" id="uName" placeholder="–ò–≤–∞–Ω"></div>
        <div class="input-group"><label>–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è</label><input type="date" id="uDob"></div>
        <div class="input-group"><label>–í—Ä–µ–º—è (00:00)</label><input type="time" id="uTob" value="12:00"></div>
        <button onclick="mainCalculation()">–£–ó–ù–ê–¢–¨ –ü–†–ï–î–ù–ê–ó–ù–ê–ß–ï–ù–ò–ï</button>
    </div>

    <div id="resBlock" class="results">
        
        <div class="card">
            <h3>üíé –í–∞—à–∏ –ö–ª—é—á–µ–≤—ã–µ –ß–∏—Å–ª–∞</h3>
            <p>–ß–∏—Å–ª–æ –î—É—à–∏ (–ú—É–ª–∞–Ω–∫): <span id="outMula" class="highlight"></span></p>
            <p>–ß–∏—Å–ª–æ –°—É–¥—å–±—ã (–ë—Ö–∞–≥—å—è–Ω–∫): <span id="outBhagya" class="highlight"></span></p>
            <p>–ß–∏—Å–ª–æ –ò–º–µ–Ω–∏ (–ù–∞–º–∞–Ω–∫): <span id="outNama" class="highlight"></span></p>
            <p id="outPlanet" style="font-style: italic; color: #aaa;"></p>
        </div>

        <div class="card">
            <h3 style="text-align:center">‚òØÔ∏è –ö–≤–∞–¥—Ä–∞—Ç –õ–æ-–®—É</h3>
            <div class="loshu-grid" id="outLoshu"></div>
            <div id="outYogas" style="text-align:center"></div>
        </div>

        <div class="card" style="border-left-color: #ff4444;">
            <h3>‚ö†Ô∏è –ö–∞—Ä–º–∏—á–µ—Å–∫–∏–µ –ø—É—Å—Ç–æ—Ç—ã</h3>
            <div id="outMissing" style="font-size: 0.9rem;"></div>
        </div>

        <div class="card" style="border-left-color: #4caf50;">
            <h3>üìÖ –õ–∏—á–Ω—ã–π –ü—Ä–æ–≥–Ω–æ–∑</h3>
            <div class="forecast-box">
                <p>–í–∞—à –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –≥–æ–¥: <span id="outPYear" class="highlight"></span></p>
                <p id="outPYearDesc" style="font-size:0.9rem"></p>
            </div>
            <div class="grid-2" style="margin-top:10px">
                <div class="forecast-box">
                    <small>–õ–∏—á–Ω—ã–π –º–µ—Å—è—Ü</small><br><b id="outPMonth" style="font-size:1.2rem"></b>
                </div>
                <div class="forecast-box">
                    <small>–õ–∏—á–Ω—ã–π –¥–µ–Ω—å</small><br><b id="outPDay" style="font-size:1.2rem"></b>
                </div>
            </div>
        </div>

        <div class="card">
            <h3>üåÄ –≠–Ω–µ—Ä–≥–µ—Ç–∏—á–µ—Å–∫–∏–µ —Ü–µ–Ω—Ç—Ä—ã (–ß–∞–∫—Ä—ã)</h3>
            <div id="outChakras" style="font-size:0.9rem"></div>
        </div>

    </div>
</div>

<script>
    // --- –î–ê–ù–ù–´–ï ---
    const planetData = {
        1: "–°–æ–ª–Ω—Ü–µ: –õ–∏–¥–µ—Ä—Å—Ç–≤–æ, —ç–≥–æ, –≤–ª–∞—Å—Ç—å.",
        2: "–õ—É–Ω–∞: –ò–Ω—Ç—É–∏—Ü–∏—è, —ç–º–æ—Ü–∏–∏, –º—è–≥–∫–æ—Å—Ç—å.",
        3: "–Æ–ø–∏—Ç–µ—Ä: –ó–Ω–∞–Ω–∏—è, —É–¥–∞—á–∞, —É—á–∏—Ç–µ–ª—å—Å—Ç–≤–æ.",
        4: "–†–∞—Ö—É: –ù–æ–≤–∞—Ç–æ—Ä—Å—Ç–≤–æ, —Ä–∏—Å–∫, –∏–ª–ª—é–∑–∏–∏.",
        5: "–ú–µ—Ä–∫—É—Ä–∏–π: –õ–æ–≥–∏–∫–∞, —Ä–µ—á—å, –±–∏–∑–Ω–µ—Å.",
        6: "–í–µ–Ω–µ—Ä–∞: –ö—Ä–∞—Å–æ—Ç–∞, –ª—é–±–æ–≤—å, –∫–æ–º—Ñ–æ—Ä—Ç.",
        7: "–ö–µ—Ç—É: –ú—É–¥—Ä–æ—Å—Ç—å, –∏–Ω—Ç—É–∏—Ü–∏—è, –º–∏—Å—Ç–∏–∫–∞.",
        8: "–°–∞—Ç—É—Ä–Ω: –ö–∞—Ä–º–∞, —Ç—Ä—É–¥, –¥–∏—Å—Ü–∏–ø–ª–∏–Ω–∞.",
        9: "–ú–∞—Ä—Å: –≠–Ω–µ—Ä–≥–∏—è, –≤–æ–ª—è, –ø–æ–±–µ–¥–∞."
    };

    const yearForecasts = {
        1: "<b>–ì–æ–¥ –°–æ–ª–Ω—Ü–∞ (–ù–∞—á–∞–ª–æ):</b> –í—Ä–µ–º—è –¥–ª—è –Ω–æ–≤—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤. –°—Ç–∞–≤—å—Ç–µ —Ü–µ–ª–∏ –Ω–∞ 9 –ª–µ—Ç –≤–ø–µ—Ä–µ–¥. –ù–µ –±–æ–π—Ç–µ—Å—å –æ–¥–∏–Ω–æ—á–µ—Å—Ç–≤–∞ –≤ —Ä–µ—à–µ–Ω–∏—è—Ö.",
        2: "<b>–ì–æ–¥ –õ—É–Ω—ã (–†–∞–∑–≤–∏—Ç–∏–µ):</b> –í—Ä–µ–º—è –¥–∏–ø–ª–æ–º–∞—Ç–∏–∏. –ù–∞–ª–∞–∂–∏–≤–∞–π—Ç–µ —Å–≤—è–∑–∏, –∏—â–∏—Ç–µ –ø–∞—Ä—Ç–Ω–µ—Ä–æ–≤, —Å–ª—É—à–∞–π—Ç–µ –∏–Ω—Ç—É–∏—Ü–∏—é.",
        3: "<b>–ì–æ–¥ –Æ–ø–∏—Ç–µ—Ä–∞ (–¢–≤–æ—Ä—á–µ—Å—Ç–≤–æ):</b> –ì–æ–¥ —É–¥–∞—á–∏ –∏ –æ–±—É—á–µ–Ω–∏—è. –î–µ–ª–∏—Ç–µ—Å—å –∑–Ω–∞–Ω–∏—è–º–∏, –∑–∞—è–≤–ª—è–π—Ç–µ –æ —Å–µ–±–µ –º–∏—Ä—É.",
        4: "<b>–ì–æ–¥ –†–∞—Ö—É (–¢—Ä—É–¥):</b> –ì–æ–¥ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã. –ù—É–∂–Ω–æ –º–Ω–æ–≥–æ —Ä–∞–±–æ—Ç–∞—Ç—å –∏ –Ω–∞–≤–æ–¥–∏—Ç—å –ø–æ—Ä—è–¥–æ–∫ –≤ –∂–∏–∑–Ω–∏ –∏ —Ñ–∏–Ω–∞–Ω—Å–∞—Ö.",
        5: "<b>–ì–æ–¥ –ú–µ—Ä–∫—É—Ä–∏—è (–ü–µ—Ä–µ–º–µ–Ω—ã):</b> –í—Ä–µ–º—è –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–π, –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–π –∏ –±—ã—Å—Ç—Ä—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤. –ë—É–¥—å—Ç–µ –≥–∏–±–∫–∏–º–∏.",
        6: "<b>–ì–æ–¥ –í–µ–Ω–µ—Ä—ã (–î–æ–º):</b> –í—Ä–µ–º—è —Å–µ–º—å–∏ –∏ –ª—é–±–≤–∏. –ó–∞–Ω–∏–º–∞–π—Ç–µ—Å—å —É—é—Ç–æ–º, –∑–¥–æ—Ä–æ–≤—å–µ–º –±–ª–∏–∑–∫–∏—Ö –∏ –∫—Ä–∞—Å–æ—Ç–æ–π.",
        7: "<b>–ì–æ–¥ –ö–µ—Ç—É (–ü–∞—É–∑–∞):</b> –î—É—Ö–æ–≤–Ω—ã–π –≥–æ–¥. –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –¥–ª—è –ø–µ—Ä–µ–æ—Å–º—ã—Å–ª–µ–Ω–∏—è. –•–æ—Ä–æ—à–æ –¥–ª—è –º–µ–¥–∏—Ç–∞—Ü–∏–π –∏ —É—á–µ–±—ã.",
        8: "<b>–ì–æ–¥ –°–∞—Ç—É—Ä–Ω–∞ (–†–µ–∑—É–ª—å—Ç–∞—Ç):</b> –°–±–æ—Ä —É—Ä–æ–∂–∞—è. –ö–∞—Ä–º–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–æ–ª–≥–∏. –§–∏–Ω–∞–Ω—Å–æ–≤—ã–π —É—Å–ø–µ—Ö –ø—Ä–∏ –¥–æ–ª–∂–Ω–æ–π –¥–∏—Å—Ü–∏–ø–ª–∏–Ω–µ.",
        9: "<b>–ì–æ–¥ –ú–∞—Ä—Å–∞ (–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ):</b> –û—á–∏—Å—Ç–∫–∞. –í—ã–±—Ä–∞—Å—ã–≤–∞–π—Ç–µ –ª–∏—à–Ω–µ–µ, –∑–∞–∫—Ä—ã–≤–∞–π—Ç–µ –∫—Ä–µ–¥–∏—Ç—ã –∏ —Å—Ç–∞—Ä—ã–µ –æ—Ç–Ω–æ—à–µ–Ω–∏—è."
    };

    const alphabet = {'–∞':1,'–∏':1,'–π':1,'—ã':1,'–±':2,'–∫':2,'—Ä':2,'–≥':3,'–ª':3,'—Å':3,'–¥':4,'–º':4,'—Ç':4,'–µ':5,'–Ω':5,'—Ö':5,'–≤':6,'—É':6,'–æ':7,'–∑':7,'—Ü':7,'—Ñ':8,'–ø':8,'–∂':8,'—à':8,'—å':0,'—ä':0,'—ç':5,'—é':1,'—è':2};

    // --- –õ–û–ì–ò–ö–ê ---
    function sum(n) {
        let s = n.toString().split('').reduce((a, b) => parseInt(a) + parseInt(b), 0);
        return s > 9 ? sum(s) : s;
    }

    function mainCalculation() {
        const name = document.getElementById('uName').value;
        const dobStr = document.getElementById('uDob').value;
        const tobStr = document.getElementById('uTob').value;

        if(!dobStr) return alert("–í–≤–µ–¥–∏—Ç–µ –¥–∞—Ç—É!");

        const dObj = new Date(dobStr);
        let d = dObj.getDate();
        const m = dObj.getMonth() + 1;
        const y = dObj.getFullYear();
        const h = parseInt(tobStr.split(':')[0]);

        // –í–µ–¥–∏—á–µ—Å–∫–∞—è –ø–æ–ø—Ä–∞–≤–∫–∞ (–î–µ–Ω—å –º–µ–Ω—è–µ—Ç—Å—è –≤ 6 —É—Ç—Ä–∞)
        if (h < 6) d = (d - 1 === 0) ? 30 : d - 1;

        // 1. –û—Å–Ω–æ–≤–Ω—ã–µ —á–∏—Å–ª–∞
        const mula = sum(d);
        const bhagya = sum(d + m + y);
        
        let nSum = 0;
        name.toLowerCase().split('').forEach(l => nSum += (alphabet[l] || 0));
        const nama = sum(nSum);

        document.getElementById('outMula').innerText = mula;
        document.getElementById('outBhagya').innerText = bhagya;
        document.getElementById('outNama').innerText = nama || "‚Äî";
        document.getElementById('outPlanet').innerText = planetData[mula];

        // 2. –õ–æ-–®—É
        const full = d.toString() + m.toString() + y.toString();
        const counts = {};
        [4,9,2,3,5,7,8,1,6].forEach(num => {
            counts[num] = full.split(num).length - 1;
        });

        renderLoshu(counts);

        // 3. –ü—Ä–æ–≥–Ω–æ–∑
        const now = new Date();
        const curY = now.getFullYear();
        const pYear = sum(d + m + sum(curY));
        const pMonth = sum(pYear + (now.getMonth() + 1));
        const pDay = sum(pMonth + now.getDate());

        document.getElementById('outPYear').innerText = pYear;
        document.getElementById('outPYearDesc').innerHTML = yearForecasts[pYear];
        document.getElementById('outPMonth').innerText = pMonth;
        document.getElementById('outPDay').innerText = pDay;

        // 4. –ß–∞–∫—Ä—ã
        document.getElementById('outChakras').innerHTML = `
            <p>üî¥ –ú—É–ª–∞–¥—Ö–∞—Ä–∞: <b>${sum(d+m+y)}</b> - –ñ–∏–∑–Ω–µ–Ω–Ω–∞—è –æ–ø–æ—Ä–∞</p>
            <p>üü† –°–≤–∞–¥—Ö–∏—Å—Ç–∞–Ω–∞: <b>${sum(d+m)}</b> - –¢–≤–æ—Ä—á–µ—Å–∫–∏–π –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª</p>
            <p>üü° –ú–∞–Ω–∏–ø—É—Ä–∞: <b>${sum(d+y)}</b> - –°–æ—Ü–∏–∞–ª—å–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è</p>
            <p>üü¢ –ê–Ω–∞—Ö–∞—Ç–∞: <b>${sum(m+y)}</b> - –°–µ—Ä–¥–µ—á–Ω—ã–π —Ü–µ–Ω—Ç—Ä</p>
        `;

        document.getElementById('resBlock').style.display = 'block';
    }

    function renderLoshu(c) {
        const order = [4,9,2,3,5,7,8,1,6];
        const grid = document.getElementById('outLoshu');
        const miss = document.getElementById('outMissing');
        const yogas = document.getElementById('outYogas');
        
        grid.innerHTML = ''; miss.innerHTML = ''; yogas.innerHTML = '';

        const meanings = {1:"–≠–≥–æ", 2:"–ß—É–≤—Å—Ç–≤–∞", 3:"–£–º", 4:"–ü–æ—Ä—è–¥–æ–∫", 5:"–ë–∞–ª–∞–Ω—Å", 6:"–£—é—Ç", 7:"–û–ø—ã—Ç", 8:"–î–µ–Ω—å–≥–∏", 9:"–ê–º–±–∏—Ü–∏–∏"};

        order.forEach(n => {
            let val = c[n] > 0 ? n.toString().repeat(c[n]) : ".";
            grid.innerHTML += `<div class="loshu-cell"><small>${n}</small>${val}</div>`;
            if(c[n] === 0) miss.innerHTML += `‚Ä¢ <b>–ù–µ—Ç ${n}:</b> –ù–µ–¥–æ—Å—Ç–∞—Ç–æ–∫ —ç–Ω–µ—Ä–≥–∏–∏ ${meanings[n]}.<br>`;
        });

        if(c[4] && c[9] && c[2]) yogas.innerHTML += `<span class="yoga-tag">–õ–∏–Ω–∏—è –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç–∞</span>`;
        if(c[3] && c[5] && c[7]) yogas.innerHTML += `<span class="yoga-tag">–õ–∏–Ω–∏—è –≠–º–æ—Ü–∏–π</span>`;
        if(c[8] && c[1] && c[6]) yogas.innerHTML += `<span class="yoga-tag">–õ–∏–Ω–∏—è –ë–∏–∑–Ω–µ—Å–∞</span>`;
    }
</script>

</body>
</html>
